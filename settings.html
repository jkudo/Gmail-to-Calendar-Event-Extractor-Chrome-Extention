<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>æ‹¡å¼µæ©Ÿèƒ½ã®è¨­å®š</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 20px;
    }

    .container {
      background: white;
      border-radius: 16px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.3);
      max-width: 600px;
      width: 100%;
      padding: 40px;
    }

    h1 {
      color: #764ba2;
      margin-bottom: 10px;
      font-size: 28px;
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .subtitle {
      color: #666;
      margin-bottom: 30px;
      font-size: 14px;
    }

    .section {
      margin-bottom: 30px;
      padding: 20px;
      background: #f9f9f9;
      border-radius: 12px;
    }

    .section-title {
      font-size: 18px;
      color: #333;
      margin-bottom: 15px;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .form-group {
      margin-bottom: 20px;
    }

    label {
      display: block;
      font-size: 14px;
      font-weight: 500;
      color: #555;
      margin-bottom: 8px;
    }

    input[type="text"],
    input[type="password"],
    select {
      width: 100%;
      padding: 12px;
      border: 2px solid #e0e0e0;
      border-radius: 8px;
      font-size: 14px;
      transition: all 0.3s ease;
    }

    input[type="text"]:focus,
    input[type="password"]:focus,
    select:focus {
      outline: none;
      border-color: #764ba2;
      box-shadow: 0 0 0 3px rgba(118, 75, 162, 0.1);
    }

    .help-text {
      font-size: 12px;
      color: #888;
      margin-top: 6px;
      line-height: 1.4;
    }

    .toggle-container {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 12px 0;
    }

    .toggle-label {
      font-size: 14px;
      font-weight: 500;
      color: #333;
    }

    .toggle-switch {
      position: relative;
      width: 60px;
      height: 30px;
      background: #ccc;
      border-radius: 30px;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .toggle-switch.active {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    }

    .toggle-switch::after {
      content: '';
      position: absolute;
      width: 26px;
      height: 26px;
      background: white;
      border-radius: 50%;
      top: 2px;
      left: 2px;
      transition: all 0.3s ease;
      box-shadow: 0 2px 5px rgba(0,0,0,0.2);
    }

    .toggle-switch.active::after {
      left: 32px;
    }

    button {
      padding: 12px 24px;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .btn-primary {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      margin-right: 12px;
    }

    .btn-secondary {
      background: #f5f5f5;
      color: #333;
      border: 1px solid #ddd;
    }

    button:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(0,0,0,0.15);
    }

    button:disabled {
      opacity: 0.5;
      cursor: not-allowed;
      transform: none;
    }

    .status {
      padding: 12px;
      border-radius: 8px;
      margin-bottom: 20px;
      display: none;
    }

    .status.show {
      display: block;
    }

    .status.success {
      background: #e8f5e9;
      color: #2e7d32;
      border: 1px solid #81c784;
    }

    .status.error {
      background: #ffebee;
      color: #c62828;
      border: 1px solid #ef9a9a;
    }

    .status.info {
      background: #e3f2fd;
      color: #1976d2;
      border: 1px solid #90caf9;
    }

    .ai-status {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 4px 12px;
      border-radius: 20px;
      font-size: 12px;
      font-weight: 600;
    }

    .ai-status.enabled {
      background: #e8f5e9;
      color: #2e7d32;
    }

    .ai-status.disabled {
      background: #ffebee;
      color: #c62828;
    }

    .link {
      color: #764ba2;
      text-decoration: none;
      font-weight: 500;
    }

    .link:hover {
      text-decoration: underline;
    }

    .icon {
      width: 24px;
      height: 24px;
    }

    .setup-steps {
      background: #fff3e0;
      border: 1px solid #ffb74d;
      border-radius: 8px;
      padding: 16px;
      margin-top: 16px;
    }

    .setup-steps h3 {
      color: #e65100;
      font-size: 14px;
      margin-bottom: 12px;
    }

    .setup-steps ol {
      margin-left: 20px;
      color: #666;
      font-size: 13px;
      line-height: 1.6;
    }

    .setup-steps li {
      margin-bottom: 8px;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>
      <svg class="icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M12 8V12L15 15M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
      Gmail to Calendar è¨­å®š
    </h1>
    <p class="subtitle">æ‹¡å¼µæ©Ÿèƒ½ã®è©³ç´°è¨­å®šã¨AIæ©Ÿèƒ½ã®è¨­å®š</p>

    <div id="status" class="status"></div>

    <!-- AIè¨­å®šã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
    <div class="section">
      <h2 class="section-title">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M12 2L2 7L12 12L22 7L12 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          <path d="M2 17L12 22L22 17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          <path d="M2 12L12 17L22 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        AIæ©Ÿèƒ½è¨­å®š (Gemini)
        <span id="aiStatus" class="ai-status disabled">ç„¡åŠ¹</span>
      </h2>

      <div class="toggle-container">
        <span class="toggle-label">AIæŠ½å‡ºæ©Ÿèƒ½ã‚’æœ‰åŠ¹ã«ã™ã‚‹</span>
        <div id="aiToggle" class="toggle-switch"></div>
      </div>

      <div id="aiSettings" style="display: none;">
        <!-- APIé¸æŠ -->
        <div class="form-group">
          <label>ä½¿ç”¨ã™ã‚‹API</label>
          <div style="display: flex; gap: 12px; margin: 12px 0;">
            <label style="display: flex; align-items: center; cursor: pointer;">
              <input type="radio" name="apiType" value="gemini" id="useGeminiDirect" checked style="margin-right: 8px;">
              <span>Gemini API (æ¨å¥¨ãƒ»ç°¡å˜)</span>
            </label>
            <label style="display: flex; align-items: center; cursor: pointer;">
              <input type="radio" name="apiType" value="vertex" id="useVertexAI" style="margin-right: 8px;">
              <span>Vertex AI (é«˜åº¦)</span>
            </label>
          </div>
        </div>

        <!-- Gemini APIè¨­å®š -->
        <div id="geminiSettings">
          <div class="form-group">
            <label for="geminiApiKey">Gemini API Key *</label>
            <input type="password" id="geminiApiKey" placeholder="AIzaSy...">
            <p class="help-text">
              <a href="https://aistudio.google.com/app/apikey" target="_blank" class="link">
                Google AI Studio
              </a>
              ã§APIã‚­ãƒ¼ã‚’ç„¡æ–™ã§ä½œæˆã§ãã¾ã™ï¼ˆå€‹äººåˆ©ç”¨å‘ã‘ï¼‰
            </p>
          </div>

          <div class="setup-steps">
            <h3>ğŸ“‹ Gemini API ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ‰‹é †ï¼ˆç°¡å˜ï¼‰</h3>
            <ol>
              <li><a href="https://aistudio.google.com/app/apikey" target="_blank" class="link">Google AI Studio</a>ã«ã‚¢ã‚¯ã‚»ã‚¹</li>
              <li>Googleã‚¢ã‚«ã‚¦ãƒ³ãƒˆã§ãƒ­ã‚°ã‚¤ãƒ³</li>
              <li>ã€ŒGet API keyã€ã‚’ã‚¯ãƒªãƒƒã‚¯</li>
              <li>ã€ŒCreate API keyã€ã‚’ã‚¯ãƒªãƒƒã‚¯</li>
              <li>ç”Ÿæˆã•ã‚ŒãŸAPIã‚­ãƒ¼ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ä¸Šè¨˜ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«è²¼ã‚Šä»˜ã‘</li>
            </ol>
            <p style="margin-top: 12px; font-size: 12px; color: #666;">
              â€» ç„¡æ–™æ ï¼š1åˆ†é–“ã«60ãƒªã‚¯ã‚¨ã‚¹ãƒˆã¾ã§
            </p>
          </div>
        </div>

        <!-- Vertex AIè¨­å®š -->
        <div id="vertexSettings" style="display: none;">
          <div class="form-group">
            <label for="projectId">Google Cloud Project ID *</label>
            <input type="text" id="projectId" placeholder="ä¾‹: my-project-123456">
            <p class="help-text">Google Cloud Consoleã§ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆIDã‚’ç¢ºèªã—ã¦ãã ã•ã„</p>
          </div>

          <div class="form-group">
            <label for="vertexApiKey">ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚­ãƒ¼ (JSON) *</label>
            <textarea id="vertexApiKey" placeholder='{"type": "service_account", ...}' style="height: 100px; font-family: monospace; font-size: 12px;"></textarea>
            <p class="help-text">
              <a href="https://console.cloud.google.com/iam-admin/serviceaccounts" target="_blank" class="link">
                Google Cloud Console
              </a>
              ã§ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ä½œæˆã—ã€JSONã‚­ãƒ¼ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¦ãã ã•ã„
            </p>
          </div>

          <div class="setup-steps">
            <h3>ğŸ“‹ Vertex AI ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ‰‹é †ï¼ˆé«˜åº¦ï¼‰</h3>
            <ol>
              <li>Google Cloud Consoleã§ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆ</li>
              <li>Vertex AI APIã‚’æœ‰åŠ¹åŒ–</li>
              <li>ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ä½œæˆ</li>
              <li>ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã«ã€ŒVertex AI ãƒ¦ãƒ¼ã‚¶ãƒ¼ã€ãƒ­ãƒ¼ãƒ«ã‚’ä»˜ä¸</li>
              <li>JSONã‚­ãƒ¼ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰</li>
              <li>JSONã‚­ãƒ¼ã®å†…å®¹ã‚’ä¸Šè¨˜ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«è²¼ã‚Šä»˜ã‘</li>
            </ol>
          </div>
        </div>

        <!-- å…±é€šè¨­å®š -->
        <div class="form-group">
          <label for="model">AIãƒ¢ãƒ‡ãƒ«</label>
          <select id="model">
            <option value="gemini-2.5-flash-lite">Gemini 2.5 Flash Lite (æœ€æ–°ãƒ»æ¨å¥¨)</option>
            <option value="gemini-1.5-flash">Gemini 1.5 Flash (é«˜é€Ÿ)</option>
            <option value="gemini-1.5-pro">Gemini 1.5 Pro (é«˜ç²¾åº¦)</option>
            <option value="gemini-1.0-pro">Gemini 1.0 Pro (å®‰å®šç‰ˆ)</option>
          </select>
        </div>
      </div>
    </div>

    <!-- æŠ½å‡ºè¨­å®šã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
    <div class="section">
      <h2 class="section-title">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M9 11L12 14L22 4M21 12V19C21 19.5304 20.7893 20.0391 20.4142 20.4142C20.0391 20.7893 19.5304 21 19 21H5C4.46957 21 3.96086 20.7893 3.58579 20.4142C3.21071 20.0391 3 19.5304 3 19V5C3 4.46957 3.21071 3.96086 3.58579 3.58579C3.96086 3.21071 4.46957 3 5 3H16" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        æŠ½å‡ºè¨­å®š
      </h2>

      <div class="toggle-container">
        <span class="toggle-label">è¤‡æ•°ã®äºˆå®šã‚’è‡ªå‹•æ¤œå‡º</span>
        <div id="multiEventToggle" class="toggle-switch active"></div>
      </div>

      <div class="toggle-container">
        <span class="toggle-label">ä¼šè­°URLã‚’è‡ªå‹•æ¤œå‡º</span>
        <div id="meetingUrlToggle" class="toggle-switch active"></div>
      </div>

      <div class="toggle-container">
        <span class="toggle-label">å‚åŠ è€…ã‚’è‡ªå‹•æŠ½å‡º</span>
        <div id="attendeesToggle" class="toggle-switch"></div>
      </div>

      <div class="form-group">
        <label for="confidence">AIæŠ½å‡ºã®ä¿¡é ¼åº¦ã—ãã„å€¤</label>
        <input type="range" id="confidence" min="0" max="100" value="70" style="width: 100%;">
        <p class="help-text">ç¾åœ¨ã®å€¤: <span id="confidenceValue">70%</span></p>
      </div>
    </div>

    <!-- ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®šã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
    <div class="section">
      <h2 class="section-title">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M8 7V3M16 7V3M7 11H17M5 21H19C19.5304 21 20.0391 20.7893 20.4142 20.4142C20.7893 20.0391 21 19.5304 21 19V7C21 6.46957 20.7893 5.96086 20.4142 5.58579C20.0391 5.21071 19.5304 5 19 5H5C4.46957 5 3.96086 5.21071 3.58579 5.58579C3.21071 5.96086 3 6.46957 3 7V19C3 19.5304 3.21071 20.0391 3.58579 20.4142C3.96086 20.7893 4.46957 21 5 21Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®š
      </h2>

      <div class="form-group">
        <label for="defaultDuration">ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®äºˆå®šæ™‚é–“ï¼ˆåˆ†ï¼‰</label>
        <input type="number" id="defaultDuration" min="15" max="480" value="60">
      </div>

      <div class="form-group">
        <label for="defaultReminder">ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼ï¼ˆåˆ†å‰ï¼‰</label>
        <input type="number" id="defaultReminder" min="0" max="10080" value="10">
      </div>

      <div class="form-group">
        <label for="calendarId">ä½¿ç”¨ã™ã‚‹ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼</label>
        <select id="calendarId">
          <option value="primary">ãƒ¡ã‚¤ãƒ³ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼</option>
          <option value="custom">ã‚«ã‚¹ã‚¿ãƒ ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ï¼ˆæœªå®Ÿè£…ï¼‰</option>
        </select>
      </div>
    </div>

    <!-- ãƒœã‚¿ãƒ³ -->
    <div style="text-align: center; margin-top: 30px;">
      <button id="saveBtn" class="btn-primary">
        è¨­å®šã‚’ä¿å­˜
      </button>
      <button id="testBtn" class="btn-secondary">
        AIæ¥ç¶šãƒ†ã‚¹ãƒˆ
      </button>
    </div>
  </div>

  <script src="settings.js"></script>
</body>
</html>
